# Ra2inier \[:construction:alpha stage:warning:\]
---
**Ra2inier :hammer: 是一个为著名RTS游戏红色警戒2（Ra2）定制的，用于方便书写Ra2规则代码文件（.ini）和开发Ra2游戏扩展模组（mod）的编辑器。**

**Ra2inier会为mod开发者带来什么？**  

它提供了一个独具特色的UI界面来表达ini文件的编写，相较于通用的文本编辑器，它更专注于ra2游戏的ini规则文件的编写，针对于ra2 ini文件与其他普通ini文件的独特之处提供了特色功能支持:+1:。  

1. 代码抽象和管理：  
	正如mod开发者们所熟知的，ra2 ini文件中的一个代码块（section）可以代表一个步兵、坦克、建筑、飞机等游戏单位，也可以是全局配置、武器、注册表、弹头等抽象数据……这些代码之间，有的具有相同性，有的不具有相同性。而在配置文件中，由于游戏平台的限制，我们不同的代码不得不强行塞到一起，随着代码规模的扩大，代码开始不具备可维护性，这主要体现在：

   + 代码定位，在一堆不同类型和功能的代码之间来回跳转，消耗精力:tired_face:；
   + 代码块之间存在相互依赖，当一个块改变时，另一块也需要改变，如何处理这些依赖是一个棘手的问题:cry:；
   + 代码的重复编写，对不同的类似的单位的相同功能，我们会重复书写这些代码；对同一个单位，我们会为玩家编写一份代码，为AI人机编写一份专用代码，为战役编写一份代码……这些代码之间有少许差异，却存在着大量的重复:anger:；  
  
	ra2inier会帮助mod开发者将不同的代码类型进行抽象，以“实体对象”和“类型”的概念来称呼这些ini代码，如一个坦克的配置代码将会被抽象为一个“类型”为VechicleTypes的“实体对象”，一个步兵会被抽象成一个“类型”为InfantryTypes的“实体对象”，这样有助于我们对这些不同类型的代码进行分类管理、检索、处理依赖关系。同时当我们对这些对象上的属性进行修改时，也就意味着对应的ini代码会发生修改。

2. 词条编写智能提示
   在ra2的代码文件中存在着大量的配置项，这些配置项被mod开发者们称为词条。词条的数量很多，而且词条之间存在着数据类型的差异，一些词条需要一个由“yes”和“no”组成的bool值，一些词条需要一个在一定范围内的数字，或者更多，例如：一个浮点值、一个枚举值、一个颜色值、一个其他对象的引用，在编写词条的时候，很容易出现一些问题如： 

   > 拼写错误
   > 类型错误
   > 值域错误
   > 依赖错误
	
	而且，由于原生平台的功能较弱，mod开发者会倾向于引入Ares、Phobos等扩展平台，以增加游戏的中能够实现的逻辑，同时也带来了大量的新词条，淘汰了一些旧的词条，词条的数量是一个未知数。词条的记忆为mod开发者带来了很大的心智负担，增加了代码出错的概率。  
	ra2inier致力于解决这部分痛点，它定义了一类特殊的“抽象类型”——Word类型，允许开发者自定义Word，ra2inier将根据Word的定义在编写界面提供代码智能提示和补全。  
	同时，允许开发者在Word中使用JavaScript脚本定义“hook函数”，hook用以处理更高等级的词条校验逻辑，实现代码的转译。这意味开发者可以定义完全自定义的Word词条，它可能不局限于目前任何一个游戏平台所提供的词条，并且在需要的时候按需引入。

3. 代码处理和构建：   
   如上2中提及，Word的hook函数
  

4. 代码管理和分享：   
具有较高灵活性的解决方案，用于完成，抽象、组织和管理mod工程文件，发布mod成品文件，持续更新mod工程文件，简化mod开发工作流，支持代码热更新的调试等繁杂琐碎任务，将mod制作者和ini编写者从与代码编写无关的琐事中解放出来。
